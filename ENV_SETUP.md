# Environment Variables Configuration

## Local Development (.env.local)

Create a `.env.local` file in the project root (already exists):

```bash
# Not needed for local development - will use SQLite by default
```

## Render Environment Variables

After creating your Supabase database, add these environment variables in Render dashboard:

### Required Variables

1. **DATABASE_URL** (Add this after getting Supabase connection string)
   ```
   postgresql://postgres.xxxxx:your-password@aws-0-region.pooler.supabase.com:6543/postgres
   ```

2. **JWT_SECRET** (Already auto-generated by Render)
   - Leave as-is, Render generates this automatically

3. **AI_API_KEY** (Already configured)
   - Current value is included in code
   - Can be updated in Render dashboard if needed

4. **PORT** (Already configured)
   - Value: `8080`
   - Auto-set by Render

### How to Add DATABASE_URL to Render

1. Go to https://dashboard.render.com
2. Select your `algovault-backend` service
3. Click **Environment** tab
4. Click **Add Environment Variable**
5. Enter:
   - **Key**: `DATABASE_URL`
   - **Value**: (paste your Supabase connection string here)
6. Click **Save Changes**
7. Render will automatically redeploy (2-3 minutes)

### Verification

After deployment, check the logs for:
```
✅ Using PostgreSQL (DATABASE_URL is set)
Database: PostgreSQL via DATABASE_URL
✅ Database ready and connected
```

If you see:
```
⚠️  Using SQLite (DATABASE_URL not set)
```

Then DATABASE_URL is not properly configured in Render.

## Frontend Environment Variables (Netlify)

Your frontend should already have:

```bash
VITE_API_BASE_URL=https://your-backend.onrender.com
```

If not set, add it in Netlify dashboard:
1. Site settings → Environment variables
2. Add: `VITE_API_BASE_URL` = `https://your-backend.onrender.com`
3. Redeploy site

## Testing Locally with PostgreSQL

If you want to test PostgreSQL locally (optional):

1. Create a `.env` file in `backend/` directory:
   ```bash
   DATABASE_URL=postgresql://postgres.xxxxx:password@aws-0-region.pooler.supabase.com:6543/postgres
   ```

2. Load environment variables before running:
   ```bash
   # Windows PowerShell
   $env:DATABASE_URL="your-connection-string"
   go run .

   # Windows CMD
   set DATABASE_URL=your-connection-string
   go run .

   # Linux/Mac
   export DATABASE_URL="your-connection-string"
   go run .
   ```

3. Or just use SQLite for local development (default behavior)
