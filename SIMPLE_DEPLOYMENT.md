# Simple Free Deployment Guide

For a small app with 5-10 problems, here's the easiest free hosting setup.

## Recommended: Render (Backend) + Vercel (Frontend)

### Why This Combo?
- ‚úÖ **100% Free** for small apps
- ‚úÖ **Easy deployment** (connect GitHub, auto-deploy)
- ‚úÖ **SQLite works perfectly** for 5-10 problems
- ‚úÖ **No credit card required**

---

## Step 1: Deploy Backend to Render (5 minutes)

### 1.1 Prepare Your Code
1. Make sure your code is pushed to GitHub
2. Create a `render.yaml` file in your project root:

```yaml
services:
  - type: web
    name: algovault-backend
    env: go
    plan: free
    buildCommand: cd backend && go mod download && go build -o server .
    startCommand: ./server -db ./algovault.db -port $PORT -jwt-secret $JWT_SECRET -ai-api-key $AI_API_KEY
    envVars:
      - key: JWT_SECRET
        generateValue: true
      - key: AI_API_KEY
        sync: false  # You'll set this manually
      - key: PORT
        value: 8080
```

### 1.2 Deploy on Render

**Option A - Using render.yaml (Easiest):**
1. Go to [render.com](https://render.com) and sign up (free)
2. Click "New +" ‚Üí "Blueprint"
3. Connect your GitHub repository
4. Render will auto-detect `render.yaml` and configure everything
5. Just add the `AI_API_KEY` environment variable manually:
   - Go to your service ‚Üí Environment tab
   - Add: `AI_API_KEY` = your OpenRouter API key
6. Wait 2-3 minutes for deployment
7. Copy your backend URL (e.g., `https://algovault-backend.onrender.com`)

**Option B - Manual Configuration:**
1. Go to [render.com](https://render.com) and sign up (free)
2. Click "New +" ‚Üí "Web Service"
3. Connect your GitHub repository
4. Select your repository
5. Configure:
   - **Name**: `algovault-backend`
   - **Environment**: `Go`
   - **Root Directory**: `backend` ‚ö†Ô∏è **CRITICAL - Set this to `backend`**
   - **Build Command**: `go mod download && go build -o server .`
   - **Start Command**: `./server -db ./algovault.db -port $PORT -jwt-secret $JWT_SECRET -ai-api-key $AI_API_KEY`
6. Add Environment Variables:
   - `JWT_SECRET`: Click "Generate" (Render will create one)
   - `AI_API_KEY`: Your OpenRouter API key
   - `PORT`: `8080` (Render sets this automatically, but include it)
7. Click "Create Web Service"
8. Wait 2-3 minutes for deployment
9. Copy your backend URL (e.g., `https://algovault-backend.onrender.com`)

**‚ö†Ô∏è IMPORTANT**: If you already created the service and it's failing:
1. Go to your service ‚Üí Settings
2. **Check Root Directory**: Should be set to `backend`
3. **Check Build Command**: Should be `go mod download && go build -o server .` (NO `cd backend &&` prefix!)
   - If you see `cd backend && go mod download...`, remove the `cd backend &&` part
   - With Root Directory = `backend`, you don't need `cd backend` in the command
4. **Start Command**: Should be `./server -db ./algovault.db -port $PORT -jwt-secret $JWT_SECRET -ai-api-key $AI_API_KEY`
5. Save changes
6. Render will automatically redeploy

---

## Step 2: Deploy Frontend to Netlify (3 minutes)

### 2.1 Update Frontend Config
1. Update `frontend/.env` or create `frontend/.env.production`:
```
VITE_API_BASE_URL=https://your-backend-url.onrender.com
```

### 2.2 Deploy on Netlify
1. Go to [netlify.com](https://netlify.com) and sign up (free)
2. Click "Add new site" ‚Üí "Import an existing project"
3. Connect to GitHub and select your repository
4. Configure build settings:
   - **Base directory**: `frontend`
   - **Build command**: `npm install && npm run build`
   - **Publish directory**: `frontend/dist`
5. Click "Show advanced" and add Environment Variable:
   - **Key**: `VITE_API_BASE_URL`
   - **Value**: Your Render backend URL (from Step 1, e.g., `https://algovault-backend.onrender.com`)
6. Click "Deploy site"
7. Wait 1-2 minutes for build to complete
8. Your app is live! üéâ
9. Netlify will give you a URL like `https://your-app-name.netlify.app`

---

## Alternative: All-in-One on Render

If you prefer one platform for everything:

### Deploy Both on Render

1. **Backend** (same as Step 1 above)
2. **Frontend**:
   - Click "New +" ‚Üí "Static Site"
   - Connect GitHub repo
   - Build Command: `cd frontend && npm install && npm run build`
   - Publish Directory: `frontend/dist`
   - Add environment variable: `VITE_API_BASE_URL` = your backend URL

---

## Quick Start Commands

### Local Testing Before Deploy

```bash
# Backend
cd backend
go run . -db ./algovault.db -port 8080 -jwt-secret test123

# Frontend (in another terminal)
cd frontend
npm install
npm run build
npm run preview
```

---

## Environment Variables Summary

### Backend (Render)
- `JWT_SECRET` - Auto-generated by Render
- `AI_API_KEY` - Your OpenRouter API key
- `PORT` - Auto-set by Render (8080)

### Frontend (Netlify)
- `VITE_API_BASE_URL` - Your Render backend URL

---

## Database Setup

### SQLite (Perfect for 5-10 Problems) ‚úÖ

**Good news: No database setup needed!** SQLite is built-in and works automatically.

#### How It Works:
1. **Automatic Creation**: When your backend starts for the first time, it automatically:
   - Creates `algovault.db` file in the backend directory
   - Creates all tables (users, categories, patterns, problems, solutions)
   - Creates the demo user (`demo@algovault.com` / `demo123`)

2. **Data Persistence**: 
   - The `algovault.db` file is stored on Render's filesystem
   - Your data persists between deployments
   - All your problems, solutions, and categories are saved automatically

3. **Perfect for Your Use Case**:
   - ‚úÖ **5-10 problems**: SQLite handles this easily
   - ‚úÖ **No separate service**: Everything runs in one container
   - ‚úÖ **Zero configuration**: Just deploy and it works
   - ‚úÖ **Free**: No additional cost

#### What Gets Created Automatically:
- Database file: `backend/algovault.db`
- Tables: users, categories, patterns, problems, solutions
- Demo user: `demo@algovault.com` / `demo123` (read-only access)
- Your admin account: Create it by logging in (registration is disabled, but you can create accounts via database if needed)

#### Database Location on Render:
- File path: `backend/algovault.db` (relative to backend directory)
- Persists: Yes, data survives deployments
- Backup: Consider downloading the `.db` file periodically for backup

### If You Need PostgreSQL Later (100+ Problems)

If you grow beyond 10 problems, you can upgrade to PostgreSQL:

1. **Add PostgreSQL Service** (free on Render):
   - In Render dashboard: "New +" ‚Üí "PostgreSQL"
   - Free tier: 1GB storage, 90 days retention

2. **Update Backend Code**:
   - Change database connection in `backend/models.go`
   - Use PostgreSQL connection string from Render

3. **For Now**: SQLite is perfect! No need to change anything.

---

## Free Tier Limits

### Render
- ‚úÖ 750 hours/month (enough for 24/7)
- ‚úÖ 512MB RAM
- ‚úÖ SQLite works great for small apps

### Netlify
- ‚úÖ 100GB bandwidth/month
- ‚úÖ 300 build minutes/month
- ‚úÖ Automatic HTTPS
- ‚úÖ Free custom domain support

---

## Troubleshooting

### Backend not starting?
- **Error: `./server: No such file or directory`**
  - **Fix**: Go to your Render service ‚Üí Settings ‚Üí Scroll to "Root Directory"
  - Set **Root Directory** to: `backend`
  - Click "Save Changes"
  - Render will automatically redeploy (wait 2-3 minutes)
  - This tells Render to run all commands from the `backend` directory where `server` is built
- Check Render logs: Click on your service ‚Üí "Logs"
- Make sure `startCommand` uses `$PORT` (Render sets this)
- Verify Root Directory is set to `backend` in Settings

### Frontend can't connect to backend?
- Check CORS settings in `backend/main.go`
- Verify `VITE_API_BASE_URL` matches your Render backend URL (no trailing slash, no `/api`)
- In Netlify: Go to Site settings ‚Üí Environment variables ‚Üí Check `VITE_API_BASE_URL` is set correctly
- **Important**: After changing environment variables in Netlify, you need to trigger a new deploy
- Rebuild your site: Go to Deploys ‚Üí Trigger deploy ‚Üí Deploy site

### Database issues?
- **SQLite is perfect for 5-10 problems** - no separate database service needed!
- SQLite file (`algovault.db`) persists on Render's filesystem
- The database is created automatically on first run
- Demo user is created automatically
- **Note**: SQLite on Render's free tier works great for small apps
- If you need to scale later (100+ problems), you can switch to PostgreSQL (also free on Render)

---

## Cost: $0/month ‚úÖ

Both platforms are completely free for your use case!
